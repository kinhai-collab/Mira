version: 1
frontend:
  phases:
    preBuild:
      commands:
        - cd MIRA_MVP0/frontend
        - npm ci
        - echo "API URL is $NEXT_PUBLIC_API_URL"
    build:
      commands:
        - npm run build
  environment:
    variables:
      NEXT_PUBLIC_API_URL: https://xmtg107ehj.execute-api.us-east-2.amazonaws.com
      # IMPORTANT: These must be set in AWS Amplify Console > App Settings > Environment variables
      # The build will fail if these are missing. Set them in the Amplify Console, not here.
      # NEXT_PUBLIC_SUPABASE_URL: https://oxozhsomntvuyrurfzre.supabase.co
      # NEXT_PUBLIC_SUPABASE_ANON_KEY: your-anon-key-here
  artifacts:
    baseDirectory: MIRA_MVP0/frontend/out
    files:
      - '**/*'
  cache:
    paths:
      - MIRA_MVP0/frontend/node_modules/**/*
